<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IELTS 智慧詞彙與搭配系統</title>
    <!-- 載入 Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 載入 Inter 字體 -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* 基本樣式 */
        body {
            font-family: 'Inter', 'Noto Sans TC', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        /* Highlight 樣式 */
        .highlight {
            background-color: rgba(59, 130, 246, 0.3); /* bg-blue-500/30 */
            color: #bfdbfe; /* text-blue-200 */
            font-weight: 600;
            padding: 0 2px;
            border-radius: 3px;
        }
        /* 隱藏元素 */
        .hidden {
            display: none;
        }
        /* 簡易 Spinner 動畫 */
        .spinner {
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #ffffff;
            animation: spin 1s ease-in-out infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-100 min-h-screen p-4 md:p-8">

    <div class="max-w-4xl mx-auto">
        <!-- 標題 -->
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-white">IELTS 智慧詞彙與搭配系統</h1>
            <p class="text-lg text-gray-400 mt-2">基於 Feature Specification "Draft" (2025-10-29)</p>
        </header>

        <!-- 功能分頁標籤 -->
        <div class="flex justify-center mb-6 border-b border-gray-700">
            <button id="tabPrediction" class="tab-button px-6 py-3 font-semibold text-white bg-gray-800 rounded-t-lg -mb-px border-t border-l border-r border-gray-700">
                1. 詞彙預測 (Prediction)
            </button>
            <button id="tabValidation" class="tab-button px-6 py-3 font-semibold text-gray-400 hover:bg-gray-800/50 rounded-t-lg">
                2. 搭配驗證 (Validation)
            </button>
        </div>

        <!-- 主要內容區域 -->
        <main>
            <!-- 1. 詞彙預測 (Prediction) 內容 -->
            <div id="predictionContent">
                <form id="predictionForm" class="bg-gray-800 p-6 rounded-lg shadow-xl space-y-6">
                    <div>
                        <label for="predInput" class="block text-sm font-medium text-gray-300 mb-2">輸入英文片語 (Input Phrase)</label>
                        <input type="text" id="predInput" class="w-full bg-gray-700 border border-gray-600 rounded-md p-3 text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="例如：The government should...">
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="predPos" class="block text-sm font-medium text-gray-300 mb-2">指定詞性 (POS Filter)</label>
                            <select id="predPos" class="w-full bg-gray-700 border border-gray-600 rounded-md p-3 text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                <option value="any">所有詞性 (Any)</option>
                                <option value="N">名詞 (Noun)</option>
                                <option value="Pro">代名詞 (Pronoun)</option>
                                <option value="V">動詞 (Verb)</option>
                                <option value="Adj">形容詞 (Adjective)</option>
                                <option value="Adv">副詞 (Adverb)</option>
                                <option value="Prep">介系詞 (Preposition)</option>
                                <option value="Conj">連接詞 (Conjunction)</option>
                                <option value="Interj">感歎詞 (Interjection)</option>
                                <option value="Det/Art">限定詞/冠詞 (Determiner/Article)</option>
                            </select>
                        </div>
                        <div>
                            <label for="predTask" class="block text-sm font-medium text-gray-300 mb-2">寫作任務 (IELTS Task)</label>
                            <select id="predTask" class="w-full bg-gray-700 border border-gray-600 rounded-md p-3 text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                <option value="general">通用 (General)</option>
                                <option value="task1">Task 1 (學術/一般)</option>
                                <option value="task2">Task 2 (學術/一般)</option>
                            </select>
                        </div>
                    </div>
                    
                    <button type="submit" id="predButton" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg transition-colors duration-200 flex items-center justify-center gap-2 disabled:opacity-50">
                        <span id="predButtonText">獲取預測詞彙 (Get Predictions)</span>
                        <div id="predLoading" class="spinner hidden"></div>
                    </button>
                </form>

                <!-- 預測結果區域 -->
                <div id="predError" class="text-red-400 bg-red-900/50 p-4 rounded-lg mt-6 hidden"></div>
                <div id="predictionResults" class="mt-8 grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- 預測結果卡片將動態插入此處 -->
                </div>
            </div>

            <!-- 2. 搭配驗證 (Validation) 內容 -->
            <div id="validationContent" class="hidden">
                <form id="validationForm" class="bg-gray-800 p-6 rounded-lg shadow-xl space-y-6">
                    <div>
                        <label for="valInput1" class="block text-sm font-medium text-gray-300 mb-2">初始片語 (Initial Phrase)</label>
                        <input type="text" id="valInput1" class="w-full bg-gray-700 border border-gray-600 rounded-md p-3 text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="例如：There is a growing trend">
                    </div>
                    <div>
                        <label for="valInput2" class="block text-sm font-medium text-gray-300 mb-2">目標詞彙 (Target Word/Phrase)</label>
                        <input type="text" id="valInput2" class="w-full bg-gray-700 border border-gray-600 rounded-md p-3 text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="例如：towards">
                    </div>
                    
                    <button type="submit" id="valButton" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-lg transition-colors duration-200 flex items-center justify-center gap-2 disabled:opacity-50">
                        <span id="valButtonText">驗證搭配 (Validate)</span>
                        <div id="valLoading" class="spinner hidden"></div>
                    </button>
                </form>

                <!-- 驗證結果區域 -->
                <div id="valError" class="text-red-400 bg-red-900/50 p-4 rounded-lg mt-6 hidden"></div>
                <div id="validationResults" class="mt-8 bg-gray-800 p-6 rounded-lg shadow-xl hidden">
                    <!-- 驗證結果將動態插入此處 -->
                </div>
            </div>
        </main>
    </div>

    <!-- JavaScript 邏輯 -->
    <script type="module">
        // --- Gemini API 金鑰 (保留為空字串，Canvas 將自動填入) ---
        const apiKey = "";
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

        // --- DOM 元素參照 ---
        const tabs = {
            prediction: document.getElementById('tabPrediction'),
            validation: document.getElementById('tabValidation')
        };
        const contents = {
            prediction: document.getElementById('predictionContent'),
            validation: document.getElementById('validationContent')
        };
        
        // 預測 (Prediction) 相關元素
        const predForm = document.getElementById('predictionForm');
        const predInput = document.getElementById('predInput');
        const predPos = document.getElementById('predPos');
        const predTask = document.getElementById('predTask');
        const predButton = document.getElementById('predButton');
        const predButtonText = document.getElementById('predButtonText');
        const predLoading = document.getElementById('predLoading');
        const predError = document.getElementById('predError');
        const predictionResults = document.getElementById('predictionResults');

        // 驗證 (Validation) 相關元素
        const valForm = document.getElementById('validationForm');
        const valInput1 = document.getElementById('valInput1');
        const valInput2 = document.getElementById('valInput2');
        const valButton = document.getElementById('valButton');
        const valButtonText = document.getElementById('valButtonText');
        const valLoading = document.getElementById('valLoading');
        const valError = document.getElementById('valError');
        const validationResults = document.getElementById('validationResults');

        // --- 核心輔助函式 (來自規格文件) ---

        /**
         * 根據分數獲取搭配強度詳情 (來自 v1.1 規格)
         * @param {number} score - 搭配分數 (0-100)
         * @returns {object} - { name, meaning, color }
         */
        function getStrengthDetails(score) {
            if (typeof score !== 'number' || isNaN(score)) {
                score = 1; // 預設為最低分
            }
            if (score >= 80) {
                return { name: '極高 (Excellent)', meaning: '專業、地道，母語人士慣用，建議優先使用。', color: 'bg-green-600 text-white' };
            } else if (score >= 50) {
                return { name: '中等 (Acceptable)', meaning: '搭配常見且可接受，但可能有更強或更精準的替代方案。', color: 'bg-yellow-500 text-white' };
            } else {
                return { name: '偏低 (Uncommon)', meaning: '搭配可能不自然或不夠地道，建議尋找替換。', color: 'bg-red-600 text-white' };
            }
        }

        /**
         * 高亮顯示例句中的片語
         * @param {string} text - 完整的例句
         * @param {string} phraseToHighlight - 需要高亮的片語
         * @returns {string} - 包含 HTML <span class="highlight"> 的字串
         */
        function highlight(text, phraseToHighlight) {
            if (!text || !phraseToHighlight) return text;
            // 使用正則表達式進行不區分大小寫的替換
            const regex = new RegExp(phraseToHighlight.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&'), 'gi');
            return text.replace(regex, `<span class="highlight">$&</span>`);
        }

        // --- API 呼叫邏輯 ---

        /**
         * 呼叫 Gemini API
         * @param {string} systemPrompt - 系統提示 (System Instruction)
         * @param {string} userQuery - 使用者查詢
         * @param {object|null} schema - JSON 輸出結構 (若需要)
         * @param {number} maxRetries - 最大重試次數
         * @returns {Promise<object>} - API 回應或錯誤物件
         */
        async function callGeminiAPI(systemPrompt, userQuery, schema = null, maxRetries = 3) {
            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                systemInstruction: {
                    parts: [{ text: systemPrompt }]
                },
            };

            if (schema) {
                payload.generationConfig = {
                    responseMimeType: "application/json",
                    responseSchema: schema
                };
            }

            for (let attempt = 1; attempt <= maxRetries; attempt++) {
                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        throw new Error(`API 請求失敗，狀態碼: ${response.status}`);
                    }

                    const result = await response.json();
                    const candidate = result.candidates?.[0];

                    if (!candidate || !candidate.content?.parts?.[0]) {
                        throw new Error("API 返回了無效的回應結構");
                    }

                    const part = candidate.content.parts[0];
                    
                    if (schema) {
                        // 處理 JSON 回應
                        const jsonText = part.text;
                        return JSON.parse(jsonText);
                    } else {
                        // 處理純文字回應
                        return part.text;
                    }

                } catch (error) {
                    console.error(`API 呼叫第 ${attempt} 次失敗:`, error);
                    if (attempt === maxRetries) {
                        return { isError: true, message: `API 請求失敗: ${error.message}` };
                    }
                    // 指數退避
                    await new Promise(resolve => setTimeout(resolve, Math.pow(2, attempt) * 1000));
                }
            }
        }

        // --- 事件處理 (Event Handlers) ---

        // 1. 處理詞彙預測 (Prediction)
        const predictionSchema = {
            type: "ARRAY",
            maxItems: 6, // 根據 "Draft" 規格 (US1) "6 個候選"
            items: {
                type: "OBJECT",
                properties: {
                    "word": { "type": "STRING", "description": "預測的下一個詞彙" },
                    "ppl": { "type": "NUMBER", "description": "該示例句的困惑度 (Perplexity)" },
                    "example": { "type": "STRING", "description": "不超過 25 個字的例句" }
                },
                required: ["word", "ppl", "example"]
            }
        };
        
        async function handlePredictionSubmit(e) {
            e.preventDefault();
            const phrase = predInput.value.trim();
            if (!phrase) {
                predError.textContent = "請輸入英文片語。";
                predError.classList.remove('hidden');
                return;
            }

            // 設置 UI 為載入中
            predError.classList.add('hidden');
            predLoading.classList.remove('hidden');
            predButton.disabled = true;
            predButtonText.textContent = "正在預測...";
            predictionResults.innerHTML = '';

            // 準備 API 請求
            const posFilter = predPos.value === 'any' ? '任何詞性' : predPos.value;
            const taskContext = predTask.value === 'general' ? '通用寫作' : `IELTS ${predTask.value}`;

            const systemPrompt = `你是一個 IELTS 寫作助教。你的任務是根據使用者輸入的片語，預測 6 個最常見的下一個詞彙。
規則：
1. 嚴格遵守使用者指定的「詞性 (POS)」和「寫作任務 (Task)」上下文。
2. 為每個預測詞提供一個「精簡例句 (example)」，例句必須小於 25 個字，且符合指定的 Task 語氣。
3. 為每個例句計算其「困惑度 (ppl)」（一個數字，越低越好）。
4. 【重點】例句中，預測的詞彙必須「緊密且唯一地」緊接在使用者輸入片語的「最後一個字」之後。輸入片語的最後一個字與預測詞之間，不得有任何其他詞彙或標點符號。
5. 僅以要求的 JSON 格式陣列 (Array) 輸出。`;

            const userQuery = `
輸入片語: "${phrase}"
詞性過濾: ${posFilter}
寫作任務: ${taskContext}
`;

            // 呼叫 API
            const results = await callGeminiAPI(systemPrompt, userQuery, predictionSchema);

            // 恢復 UI
            predLoading.classList.add('hidden');
            predButton.disabled = false;
            predButtonText.textContent = "獲取預測詞彙 (Get Predictions)";

            // 處理 API 回應
            if (results.isError) {
                predError.textContent = results.message;
                predError.classList.remove('hidden');
            } else if (Array.isArray(results)) {
                displayPredictionResults(results, phrase);
            } else {
                predError.textContent = "收到非預期的回應格式。";
                predError.classList.remove('hidden');
            }
        }

        // 2. 顯示預測結果
        function displayPredictionResults(results, inputPhrase) {
            if (results.length === 0) {
                predictionResults.innerHTML = `<p class="text-gray-400 md:col-span-2 text-center">找不到符合條件的預測詞彙。</p>`;
                return;
            }

            results.forEach((item, index) => {
                const phraseToHighlight = `${inputPhrase} ${item.word}`;
                const card = document.createElement('div');
                card.className = 'bg-gray-800 p-5 rounded-lg shadow-lg border border-gray-700';
                card.innerHTML = `
                    <h3 class="text-xl font-bold text-white mb-2">${item.word}</h3>
                    <div class="text-sm font-medium text-yellow-400 mb-3">
                        困惑度 (PPL): ${item.ppl}
                    </div>
                    <div id="example-container-${index}" class="bg-gray-700 p-3 rounded-md text-gray-200">
                        ${highlight(item.example, phraseToHighlight)}
                    </div>
                    <div class="flex gap-2 mt-4">
                        <select id="band-select-${index}" class="w-2/3 bg-gray-600 border border-gray-500 rounded-md p-2 text-sm text-white focus:ring-1 focus:ring-blue-500">
                            <option value="5">Band 5</option>
                            <option value="6">Band 6</option>
                            <option value="7.5" selected>Band 7.5</option>
                            <option value="8">Band 8</option>
                            <option value="9">Band 9</option>
                        </select>
                        <button class="regen-button w-1/3 bg-gray-500 hover:bg-gray-400 text-white text-sm font-medium py-2 px-3 rounded-lg transition-colors duration-200 flex items-center justify-center gap-1 disabled:opacity-50"
                                data-index="${index}"
                                data-phrase="${inputPhrase}"
                                data-word="${item.word}">
                            <span class="regen-text">重新生成</span>
                            <div class="spinner regen-loading hidden"></div>
                        </button>
                    </div>
                `;
                predictionResults.appendChild(card);
            });
        }

        // 3. 處理例句重新生成 (Event Delegation)
        predictionResults.addEventListener('click', async function(e) {
            const button = e.target.closest('.regen-button');
            if (!button) return;

            e.preventDefault();
            const index = button.dataset.index;
            const inputPhrase = button.dataset.phrase;
            const word = button.dataset.word;
            
            const bandSelect = document.getElementById(`band-select-${index}`);
            const band = bandSelect.value;
            
            const exampleContainer = document.getElementById(`example-container-${index}`);
            const regenText = button.querySelector('.regen-text');
            const regenLoading = button.querySelector('.regen-loading');

            // 設置 UI 為載入中
            button.disabled = true;
            regenText.classList.add('hidden');
            regenLoading.classList.remove('hidden');
            exampleContainer.textContent = "正在生成 Band " + band + " 例句...";

            // 準備 API 請求
            const systemPrompt = `你是一個 IELTS 寫作助教。你的任務是根據使用者指定的「完整片語」和「目標 Band」，生成一個「單一、精簡（最多 25 字）」的例句。
規則：
1. 例句必須符合指定的 Band 風格與複雜度。
2. 確保例句中包含完整的搭配「${inputPhrase} ${word}」。
3. 確保「${inputPhrase}」的最後一個詞與「${word}」之間，沒有任何其他詞彙或標點符號。
4. 例句必須在文法上完全正確。
5. 僅輸出該例句，不要包含任何額外說明。`; // 添加了規則 2 和 3 以確保搭配的連續性。

            const userQuery = `
完整片語: "${inputPhrase} ${word}"
目標 Band: ${band}
`;

            // 呼叫 API (純文字回應)
            const result = await callGeminiAPI(systemPrompt, userQuery, null);

            // 恢復 UI
            button.disabled = false;
            regenText.classList.remove('hidden');
            regenLoading.classList.add('hidden');

            // 顯示結果
            if (typeof result === 'string') {
                const phraseToHighlight = `${inputPhrase} ${word}`;
                exampleContainer.innerHTML = highlight(result, phraseToHighlight);
            } else {
                exampleContainer.innerHTML = `<span class="text-red-400">生成失敗: ${result.message || '未知錯誤'}</span>`;
            }
        });


        // 4. 處理搭配驗證 (Validation)
        const validationSchema = {
            type: "OBJECT",
            properties: {
                "score": { "type": "NUMBER", "description": "搭配可靠度分數 (0-100)" },
                "example": { "type": "STRING", "description": "不超過 25 個字的例句" },
                "grammarCheck": { "type": "STRING", "description": "語法驗證結果的簡短說明" },
                "spellingSuggestion": { "type": "STRING", "description": "拼寫修正建議 (若無則為空字串)" }
            },
            required: ["score", "example", "grammarCheck", "spellingSuggestion"]
        };

        async function handleValidationSubmit(e) {
            e.preventDefault();
            const phrase1 = valInput1.value.trim();
            const phrase2 = valInput2.value.trim();
            const fullPhrase = `${phrase1} ${phrase2}`;

            if (!phrase1 || !phrase2) {
                valError.textContent = "請輸入初始片語和目標詞彙。";
                valError.classList.remove('hidden');
                return;
            }

            // 設置 UI 為載入中
            valError.classList.add('hidden');
            valLoading.classList.remove('hidden');
            valButton.disabled = true;
            valButtonText.textContent = "正在驗證...";
            validationResults.classList.add('hidden');
            validationResults.innerHTML = '';

            // 準備 API 請求
            const systemPrompt = `你是一個 IELTS 寫作助教。你的任務是評估使用者提供的「完整搭配片語」的自然度與正確性。
規則：
1. 評估該搭配的自然度，給出一個「可靠度分數 (score)」 (0-100)。
2. 提供一個「精簡例句 (example)」（最多 25 字）。
3. 提供「語法驗證 (grammarCheck)」的簡短結果。
4. 如果有明顯的「拼寫錯誤 (spellingSuggestion)」，提供修正建議；若無，則返回空字串。
5. 僅以要求的 JSON 格式物件 (Object) 輸出。`;
            
            const userQuery = `
完整搭配片語: "${fullPhrase}"
`;
            
            // 呼叫 API
            const result = await callGeminiAPI(systemPrompt, userQuery, validationSchema);

            // 恢復 UI
            valLoading.classList.add('hidden');
            valButton.disabled = false;
            valButtonText.textContent = "驗證搭配 (Validate)";
            
            // 處理 API 回應
            if (result.isError) {
                valError.textContent = result.message;
                valError.classList.remove('hidden');
            } else if (result.score !== undefined) {
                displayValidationResult(result, fullPhrase);
            } else {
                valError.textContent = "收到非預期的回應格式。";
                valError.classList.remove('hidden');
            }
        }

        // 5. 顯示驗證結果
        function displayValidationResult(result, fullPhrase) {
            const { score, example, grammarCheck, spellingSuggestion } = result;
            const strength = getStrengthDetails(score);

            let suggestionHtml = '';
            if (spellingSuggestion) {
                suggestionHtml = `
                    <div class="mt-4">
                        <h4 class="font-semibold text-yellow-300">拼寫建議</h4>
                        <p class="text-yellow-400 bg-yellow-900/50 p-3 rounded-md">${spellingSuggestion}</p>
                    </div>
                `;
            }

            validationResults.innerHTML = `
                <div class="text-center mb-6">
                    <span class="text-xs font-semibold uppercase text-gray-400">搭配可靠度分數</span>
                    <div class="text-6xl font-bold ${strength.color.replace('bg-', 'text-').replace(' text-white', '')} my-2">
                        ${score}
                    </div>
                    <div class="${strength.color} px-4 py-2 rounded-full inline-block text-lg font-semibold">
                        ${strength.name}
                    </div>
                    <p class="text-gray-300 mt-3 max-w-md mx-auto">${strength.meaning}</p>
                </div>

                <div class="space-y-4">
                    <div>
                        <h4 class="font-semibold text-gray-300">範例 (Example)</h4>
                        <div class="bg-gray-700 p-4 rounded-md text-gray-200 text-lg">
                            ${highlight(example, fullPhrase)}
                        </div>
                    </div>
                    <div>
                        <h4 class="font-semibold text-gray-300">語法驗證 (Grammar Check)</h4>
                        <p class="text-gray-300">${grammarCheck}</p>
                    </div>
                    ${suggestionHtml}
                </div>
            `;
            validationResults.classList.remove('hidden');
        }


        // --- 分頁切換邏輯 ---
        function switchTab(activeTab) {
            if (activeTab === 'prediction') {
                // 啟動 Prediction
                tabs.prediction.classList.remove('text-gray-400', 'hover:bg-gray-800/50');
                tabs.prediction.classList.add('text-white', 'bg-gray-800', '-mb-px', 'border-t', 'border-l', 'border-r', 'border-gray-700');
                contents.prediction.classList.remove('hidden');
                
                // 關閉 Validation
                tabs.validation.classList.add('text-gray-400', 'hover:bg-gray-800/50');
                tabs.validation.classList.remove('text-white', 'bg-gray-800', '-mb-px', 'border-t', 'border-l', 'border-r', 'border-gray-700');
                contents.validation.classList.add('hidden');
            } else {
                // 啟動 Validation
                tabs.validation.classList.remove('text-gray-400', 'hover:bg-gray-800/50');
                tabs.validation.classList.add('text-white', 'bg-gray-800', '-mb-px', 'border-t', 'border-l', 'border-r', 'border-gray-700');
                contents.validation.classList.remove('hidden');

                // 關閉 Prediction
                tabs.prediction.classList.add('text-gray-400', 'hover:bg-gray-800/50');
                tabs.prediction.classList.remove('text-white', 'bg-gray-800', '-mb-px', 'border-t', 'border-l', 'border-r', 'border-gray-700');
                contents.prediction.classList.add('hidden');
            }
        }

        // --- 初始綁定事件 ---
        tabs.prediction.addEventListener('click', () => switchTab('prediction'));
        tabs.validation.addEventListener('click', () => switchTab('validation'));
        predForm.addEventListener('submit', handlePredictionSubmit);
        valForm.addEventListener('submit', handleValidationSubmit);

        // 預設選中第一個分頁
        switchTab('prediction');

    </script>
</body>
</html>